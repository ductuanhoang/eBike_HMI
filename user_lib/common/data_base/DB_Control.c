/*
 * DB_Control.c
 *
 *  Created on: Jun 10, 2020
 *      Author: Yolo
 */

/***********************************************************************************************************************
* History      : DD.MM.YYYY Version    Description
*              : 22.03.2020   1.00     First Release
*              : DD.MM.YYYY   x.00     First Release
*              : DD.MM.YYYY   x.00     First Release
***********************************************************************************************************************/

/***********************************************************************************************************************
* Pragma directive
***********************************************************************************************************************/

/***********************************************************************************************************************
* Includes <System Includes>
***********************************************************************************************************************/
#include "DB_Control.h"

/***********************************************************************************************************************
* Macro definitions
***********************************************************************************************************************/

/***********************************************************************************************************************
* Typedef definitions
***********************************************************************************************************************/

/***********************************************************************************************************************
* Private global variables and functions
***********************************************************************************************************************/

/***********************************************************************************************************************
* Exported global variables and functions (to be accessed by other files)
***********************************************************************************************************************/
uint16_t DB_Control[E_end_off_table_control];
uint8_t DB_Control_Priority[E_end_off_table_control];

/***********************************************************************************************************************
* Imported global variables and functions (from other files)
***********************************************************************************************************************/

/***********************************************************************************************************************
* Function Name:
* Description  :
* Arguments    : none
* Return Value : none
***********************************************************************************************************************/
void DB_Control_init( void )
{
	for (int i = 0; i < E_end_off_table_control; ++i)
	{
		DB_Control[i] = 0;
	}
}
/***********************************************************************************************************************
* Function Name: DB_Ctr_Write
* Description  :
* Arguments    : none
* Return Value : none
***********************************************************************************************************************/
void DB_Control_Write(e_DB_Control id, uint16_t value, uint8_t priority)
{
	if ( id < E_end_off_table_control)
	{
		if ( priority >= DB_Control_Priority[id])
		{
			DB_Control[id] = value;
			DB_Control_Priority[id] = priority;
		}
	}
}
/***********************************************************************************************************************
* Function Name: DB_Control_Clear_Priority
* Description  : set priority = 0
* Arguments    : none
* Return Value : none
***********************************************************************************************************************/
void DB_Control_Clear_Priority( e_DB_Control id , uint8_t priority)
{
	// if( priority >= DB_Control_Priority[id])
	// 	DB_Control_Priority[id] = 0;
	if ( priority == DB_Control_Priority[id])
		DB_Control_Priority[id] = 0;
}
/***********************************************************************************************************************
* Function Name:
* Description  :
* Arguments    : none
* Return Value : none
***********************************************************************************************************************/

uint16_t DB_Control_Read(e_DB_Control id)
{
	return DB_Control[id];
}
/***********************************************************************************************************************
* static functions
***********************************************************************************************************************/

/***********************************************************************************************************************
* End of file
***********************************************************************************************************************/
